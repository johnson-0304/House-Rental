<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

    <html lang="en">

        <head>
            <meta charset="UTF-8">
            <title>Edit House</title>
            <script src="./js/jquery-3.6.0.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        </head>
        <style>
            .agreement-textarea {
                height: 500px;
            }

            textarea {
                height: 200px;
            }

            .btn:focus, .btn:active, button:focus, button:active {
                outline: none !important;
                box-shadow: none !important;
            }

            #image-gallery .modal-footer {
                display: block;
            }

            .thumb {
                margin-top: 15px;
                margin-bottom: 15px;
            }

            .box-border {
                background-color: white;
                border-radius: 10px;
                box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            }
        </style>
        <script>
            $(function () {
                $("#editHouseForm").submit(function (e) {
                    e.preventDefault();

                    $.post("updateHouseInfo", $(this).serialize(), function (data) {
                        //data=response flag:true:register success, false: register fail
                        if (data.flag) {
                            alert("Update Success");
                            location.reload();

                        } else {
                            alert(data.errorMsg);
                            location.href = "login.html";

                        }
                    })
                })
            });
            $(function () {
                $("#editHouseAgreementForm").submit(function (e) {
                    e.preventDefault();

                    $.post("updateHouseAgreement", $(this).serialize(), function (data) {
                        //data=response flag:true:register success, false: register fail
                        if (data.flag) {
                            alert("Update Success");
                            location.reload();

                        } else {
                            alert(data.errorMsg);
                            location.href = "login.html";

                        }
                    })
                })
            });


        </script>
        <body>
            <!--header-->
            <div class="headerpage"></div>
            <!--header over-->
            <!--for id purpose-->
            <!--        <div id="houseID" style="display: none"></div>-->
            <!--/*@thymesVar id="houseId" type=""*/-->
            <span th:text="${houseId}" id="houseId" style="display: none"></span>
            <!--        style="display: none"-->


            <!--body-->
            <div class="container">
                <h6 class="section-title h1">Edit House</h6>
                <div class="row">
                    <div class="col-xs-12 col-12">
                        <!--nav-->
                        <nav class="">
                            <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                                <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home"
                                   role="tab" aria-controls="nav-home" aria-selected="true">Info</a>
                                <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile"
                                   role="tab" aria-controls="nav-profile" aria-selected="false">Agreement</a>
                                <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact"
                                   role="tab" aria-controls="nav-contact" aria-selected="false">Image</a>
                            </div>
                        </nav>
                        <!--nav end-->

                        <!--content start here-->
                        <div class="tab-content py-3 px-3 px-sm-0" id="nav-tabContent">
                            <!--info -->
                            <div class="tab-pane fade show active" id="nav-home" role="tabpanel"
                                 aria-labelledby="nav-home-tab">
                                <!--content-->

                                <form class="mt-3" id="editHouseForm" method="post">
                                    <input type="hidden" id="Id" name="id" th:value="${houseId}">
                                    <div class="form-group">
                                        <label>Building Name/Taman Name</label>
                                        <input type="text" class="form-control" name="buildingName" id="buildingName"
                                               placeholder="Enter Building Name/Taman Name" maxlength="80" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Address</label>
                                        <input type="text" class="form-control" name="address" id="address"
                                               placeholder="Address" maxlength="150" required>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group col-md-6">
                                            <label>Rental per Month (RM)</label>
                                            <input type="number" min="1" max="9999999" name="rental"
                                                   class="form-control" id="rental"
                                                   placeholder="Rental" required>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label>State</label>
                                            <select class="custom-select mr-sm-2" name="state" id="state">
                                                <option value="Johor">Johor</option>
                                                <option value="Kedah">Kedah</option>
                                                <option value="Kelantan">Kelantan</option>
                                                <option value="Malacca">Malacca</option>
                                                <option value="Negeri Sembilan">Negeri Sembilan</option>
                                                <option value="Pahang">Pahang</option>
                                                <option value="Penang">Penang</option>
                                                <option value="Perak">Perak</option>
                                                <option value="Perlis">Perlis</option>
                                                <option value="Sabah">Sabah</option>
                                                <option value="Sarawak">Sarawak</option>
                                                <option value="Selangor">Selangor</option>
                                                <option value="Terengganu">Terengganu</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Description</label>
                                        <textarea class="form-control" id="description" name="description" rows="3"
                                                  required maxlength="4500"></textarea>
                                    </div>
                                    <!--facility-->
                                    <div class="form-row">

                                        <div class="form-group col-md-3">
                                            <label>Type</label>
                                            <select class="custom-select mr-sm-2" name="type" id="type">
                                                <option value="High Rise">High Rise</option>
                                                <option value="Landed">Landed</option>
                                                <option value="Room">Room</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-md-3">
                                            <label>Square ft</label>
                                            <input type="number" min="1" max="999999" name="squareFt"
                                                   class="form-control" id="sqft"
                                                   placeholder="Square ft" required>
                                        </div>
                                        <div class="form-group col-md-3">
                                            <label>Furnish</label>
                                            <select class="custom-select mr-sm-2" name="furnish" id="furnish">
                                                <option value="No Furnishing">No Furnishing</option>
                                                <option value="Partial Furnishing">Partial Furnishing</option>
                                                <option value="Fully Furnishing">Fully Furnishing</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-md-3">
                                            <label>Car Park (Amount)</label>
                                            <input type="number" min="0" max="99" name="carPark" class="form-control"
                                                   id="carpark"
                                                   placeholder="Car Park" required>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-3">
                                            <label>Bedroom (Amount)</label>
                                            <input type="number" min="0" max="99" name="bedroom" class="form-control"
                                                   id="bedroom"
                                                   placeholder="Bedroom" required>
                                        </div>
                                        <div class="form-group col-md-3">
                                            <label>Bathroom (Amount)</label>
                                            <input type="number" min="0" max="99" name="bathroom" class="form-control"
                                                   id="bathroom"
                                                   placeholder="Bathroom" required>
                                        </div>
                                    </div>
                                    <button type="submit" id="submit-type" class="btn btn-primary">Update</button>
                                </form>
                                <!--content end-->
                            </div>
                            <!--info end -->
                            <!--desciption-->
                            <div class="tab-pane fade" id="nav-profile" role="tabpanel"
                                 aria-labelledby="nav-profile-tab">
                                <!--content-->
                                <form class="mt-3" id="editHouseAgreementForm" method="post">
                                    <input type="hidden" name="id" th:value="${houseId}">

                                    <div class="form-group">
                                        <label>Agreement</label>
                                        <textarea class="form-control agreement-textarea" id="agreement"
                                                  name="agreement" rows="3"
                                                  required maxlength="30000"></textarea>
                                    </div>

                                    <button type="submit" id="submit" class="btn btn-primary">Update</button>
                                </form>
                                <!--content end-->
                            </div>
                            <!--desciption end-->
                            <!--image upload-->
                            <div class="tab-pane fade" id="nav-contact" role="tabpanel"
                                 aria-labelledby="nav-contact-tab">
                                <!--content-->
                                <!--image uploader-->
                                <!--main image-->
                                <h3 class="mt-5">For House Main Image</h3>
                                <div class="row">
                                    <div class="col-sm-12 col-md-4">

                                        <div class="mt-5"><img id="mainImage" class=""
                                                               style="min-width: 100%!important;max-width: 100%;"
                                                               src="https://images.pexels.com/photos/186077/pexels-photo-186077.jpeg?cs=srgb&dl=pexels-binyamin-mellish-186077.jpg&fm=jpg">
                                        </div>

                                    </div>

                                    <div class="col-sm-12 col-md-8 p-3">
                                        <form th:action="@{/uploadImg}" class="" method="post"
                                              enctype="multipart/form-data"
                                              id="uploadMainImageForm">
                                            <input type="hidden" name="id" th:value="${houseId}">
                                            <input id="mainImg" accept="image/png, image/jpg, image/jpeg" name="file"
                                                   type="file"
                                                   onchange="photoChange()">
                                            <button type="submit" id="mainImgSubmitBtn" class="btn btn-success">Upload
                                            </button>
                                            <h6>***note:upload new file will remove old file</h6>
                                            <h6>***note:only png, jpg and jpeg file format are accepted</h6>
                                            <h6>***note:main image will selected as house profile picture</h6>
                                        </form>
                                    </div>
                                </div>


                                <!--main image end-->

                                <!--house images list-->
                                <div class="row p-3 mt-5 col-12">
                                    <h4 class="col-12">House Images</h4>
                                    <div class="mt-5 col-12">
                                        <form th:action="@{/uploadImg}" method="post" enctype="multipart/form-data"
                                              id="uploadForm">
                                            <input type="hidden" name="id" th:value="${houseId}">
                                            <input id="files" accept="image/png, image/jpg, image/jpeg" name="files"
                                                   type="file"
                                                   multiple onchange="photoChange()">
                                            <button type="submit" id="imgSubmitBtn" class="btn btn-success">Upload
                                            </button>
                                            <h6>***note:upload new file will remove old file</h6>
                                            <h6>***note:only png, jpg and jpeg file format are accepted</h6>
                                        </form>
                                    </div>


                                    <!--images-->
                                    <div class="row mt-3 box-border p-3 col-12">

                                        <div class="row col-12">
                                            <div class="row" id="images-container">
                                                <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                                                    <a class="thumbnail" href="#" data-image-id="" data-toggle="modal"
                                                       data-title=""
                                                       data-image="https://images.pexels.com/photos/853168/pexels-photo-853168.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                       data-target="#image-gallery">
                                                        <img class="img-thumbnail"
                                                             src="https://images.pexels.com/photos/853168/pexels-photo-853168.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                             alt="Another alt text">
                                                    </a>
                                                </div>
                                                <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                                                    <a class="thumbnail" href="#" data-image-id="" data-toggle="modal"
                                                       data-title=""
                                                       data-image="https://images.pexels.com/photos/158971/pexels-photo-158971.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                       data-target="#image-gallery">
                                                        <img class="img-thumbnail"
                                                             src="https://images.pexels.com/photos/158971/pexels-photo-158971.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                             alt="Another alt text">
                                                    </a>
                                                </div>
                                                <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                                                    <a class="thumbnail" href="#" data-image-id="" data-toggle="modal"
                                                       data-title="Im so nice"
                                                       data-image="https://images.pexels.com/photos/853168/pexels-photo-853168.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                       data-target="#image-gallery">
                                                        <img class="img-thumbnail"
                                                             src="https://images.pexels.com/photos/853168/pexels-photo-853168.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                             alt="Another alt text">
                                                    </a>
                                                </div>
                                                <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                                                    <a class="thumbnail" href="#" data-image-id="" data-toggle="modal"
                                                       data-title="Im so nice"
                                                       data-image="https://images.pexels.com/photos/158971/pexels-photo-158971.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                       data-target="#image-gallery">
                                                        <img class="img-thumbnail"
                                                             src="https://images.pexels.com/photos/158971/pexels-photo-158971.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                             alt="Another alt text">
                                                    </a>
                                                </div>
                                                <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                                                    <a class="thumbnail" href="#" data-image-id="" data-toggle="modal"
                                                       data-title="Im so nice"
                                                       data-image="https://images.pexels.com/photos/158971/pexels-photo-158971.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                       data-target="#image-gallery">
                                                        <img class="img-thumbnail"
                                                             src="https://images.pexels.com/photos/158971/pexels-photo-158971.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                             alt="Another alt text">
                                                    </a>
                                                </div>
                                            </div>


                                            <div class="modal fade" id="image-gallery" tabindex="-1" role="dialog"
                                                 aria-labelledby="myModalLabel"
                                                 aria-hidden="true">
                                                <div class="modal-dialog modal-lg">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title" id="image-gallery-title"></h4>
                                                            <button type="button" class="close"
                                                                    data-dismiss="modal"><span
                                                                    aria-hidden="true">×</span><span class="sr-only">Close</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <img id="image-gallery-image"
                                                                 class="img-responsive col-md-12" src="">
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary float-left"
                                                                    id="show-previous-image">
                                                                <i
                                                                        class="fa fa-arrow-left"></i>
                                                            </button>

                                                            <button type="button" id="show-next-image"
                                                                    class="btn btn-secondary float-right"><i
                                                                    class="fa fa-arrow-right"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--images end-->
                                </div>
                                <!--house images end-->


                                <!--image uploader end-->
                                <!--content end-->
                            </div>
                            <!--image end-->
                        </div>

                    </div>
                </div>
            </div>


            <!--body end-->
            <!--footer-->
            <div class="footerpage"></div>
            <!--footer over-->

            <!--script-->
            <script type="text/javascript">
                // function photoChange() {
                //     var _name, _fileName, personsFile;
                //     personsFile = document.getElementById("files");
                //     _name = personsFile.value;
                //     _fileName = _name.substring(_name.lastIndexOf(".") + 1).toLowerCase();
                //     console.log(_name)
                //     console.log(_fileName);
                //     if (_fileName !== "png" && _fileName !== "jpg" && _fileName !== "jpeg") {
                //         personsFile.value = null
                //         alert("Only image can be select!");
                //     }
                // }

                $(document).ready(
                    function () {
                        $("#imgSubmitBtn").attr('disabled', true);
                        $('#files').change(
                            function () {
                                if ($(this).val()) {
                                    $("#imgSubmitBtn").removeAttr('disabled');
                                } else {
                                    $("#imgSubmitBtn").attr('disabled', true);
                                }
                            });
                    });
                $(document).ready(
                    function () {
                        $("#mainImgSubmitBtn").attr('disabled', true);
                        $('#mainImg').change(
                            function () {
                                if ($(this).val()) {
                                    $("#mainImgSubmitBtn").removeAttr('disabled');
                                } else {
                                    $("#mainImgSubmitBtn").attr('disabled', true);
                                }
                            });
                    });


                $(function () {
                    $(".headerpage").load("header.html");
                    $(".footerpage").load("footer.html");
                });

            </script>
            <!--new-->
            <script>

                $(document).ready(function () {
                    var houseId = $('#houseId').text();
                    console.log(houseId);
                    $.get("findEditHouseInfo?id=" + houseId, {}, function (data) {
                        if (data==null){
                            alert("Please Login!")
                            location.href='login.html';
                        }
                        console.log(data);
                        var houseId = document.getElementById("houseId");
                        var buildingName = document.getElementById("buildingName");
                        var address = document.getElementById("address");
                        var rental = document.getElementById("rental");
                        var state = document.getElementById("state");
                        var description = document.getElementById("description");
                        var type = document.getElementById("type");
                        var sqft = document.getElementById("sqft");
                        var furnish = document.getElementById("furnish");
                        var carpark = document.getElementById("carpark");
                        var bedroom = document.getElementById("bedroom");
                        var bathroom = document.getElementById("bathroom");
                        var agreement = document.getElementById("agreement");

                        if (data.mainImageUrl === "no") {
                            $("#mainImage").attr("src", "image/no.jpg");
                        } else {
                            $("#mainImage").attr("src", data.mainImageUrl);
                        }


                        // var state1 = document.getElementById("state1").value;
                        houseId.value = data.houseId;
                        buildingName.value = data.buildingName;
                        address.value = data.address;
                        rental.value = data.rental;
                        description.value = data.description;
                        sqft.value = data.squareFt;
                        carpark.value = data.carPark;
                        bedroom.value = data.bedroom;
                        bathroom.value = data.bathroom;
                        agreement.value = data.agreement;

                        switch (data.furnish) {
                            case "No Furnishing":
                                furnish.selectedIndex = 0;
                                break;
                            case "Partial Furnishing":
                                furnish.selectedIndex = 1;
                                break;
                            case "Fully Furnishing":
                                furnish.selectedIndex = 2;
                                break;
                            default:
                                type.selectedIndex = 0;
                        }


                        switch (data.type) {
                            case "High Rise":
                                type.selectedIndex = 0;
                                break;
                            case "Landed":
                                type.selectedIndex = 1;
                                break;
                            case "Room":
                                type.selectedIndex = 2;
                                break;
                            default:
                                type.selectedIndex = 0;
                        }

                        switch (data.state) {
                            case "Johor":
                                state.selectedIndex = 0;
                                break;
                            case "Kedah":
                                state.selectedIndex = 1;
                                break;
                            case "Kelantan":
                                state.selectedIndex = 2;
                                break;
                            case "Malacca":
                                state.selectedIndex = 3;
                                break;
                            case "Negeri Sembilan":
                                state.selectedIndex = 4;
                                break;
                            case "Pahang":
                                state.selectedIndex = 5;
                                break;
                            case "Penang":
                                state.selectedIndex = 6;
                                break;
                            case "Perak":
                                state.selectedIndex = 7;
                                break;
                            case "Perlis":
                                state.selectedIndex = 8;
                                break;
                            case "Sabah":
                                state.selectedIndex = 9;
                                break;
                            case "Sarawak":
                                state.selectedIndex = 10;
                                break;
                            case "Selangor":
                                state.selectedIndex = 11;
                                break;
                            case "Terengganu":
                                state.selectedIndex = 12;
                                break;
                            default:
                                state.selectedIndex = 0;
                        }

                        var imgUrl = data.imageUrl;
                        var imgUrlList = new Array();

                        if (imgUrl === "no" || imgUrl === null) {
                            imgUrlList[0] = "image/no.jpg";
                        } else if (imgUrl.includes(',')) {
                            imgUrlList = imgUrl.split(',');
                        } else if (!imgUrl.includes(',')) {
                            imgUrlList[0] = imgUrl;
                        } else {
                            imgUrlList[0] = "image/no.jpg";
                        }
                        console.log(imgUrlList);

                        var imageHtml = "";
                        for (var i = 0; i < imgUrlList.length; i++) {

                            var imageDiv = "                        <div class=\"col-lg-3 col-md-4 col-xs-6 thumb\">\n" +
                                "                            <a class=\"thumbnail\" href=\"#\" data-image-id=\"\" data-toggle=\"modal\" data-title=\"\"\n" +
                                "                               data-image=\"" + imgUrlList[i] + "\"\n" +
                                "                               data-target=\"#image-gallery\">\n" +
                                "                                <img class=\"img-thumbnail\"\n" +
                                "                                     src=\"" + imgUrlList[i] + "\"\n" +
                                "                                     alt=\"Another alt text\">\n" +
                                "                            </a>\n" +
                                "                        </div>"

                            imageHtml += imageDiv
                        }
                        $("#images-container").html(imageHtml);

                        let modalId = $('#image-gallery');

                        $(document)
                            .ready(function () {

                                loadGallery(true, 'a.thumbnail');

                                //This function disables buttons when needed
                                function disableButtons(counter_max, counter_current) {
                                    $('#show-previous-image, #show-next-image')
                                        .show();
                                    if (counter_max === counter_current) {
                                        $('#show-next-image')
                                            .hide();
                                    } else if (counter_current === 1) {
                                        $('#show-previous-image')
                                            .hide();
                                    }
                                }

                                /**
                                 *
                                 * @param setIDs        Sets IDs when DOM is loaded. If using a PHP counter, set to false.
                                 * @param setClickAttr  Sets the attribute for the click handler.
                                 */

                                function loadGallery(setIDs, setClickAttr) {
                                    let current_image,
                                        selector,
                                        counter = 0;

                                    $('#show-next-image, #show-previous-image')
                                        .click(function () {
                                            if ($(this)
                                                .attr('id') === 'show-previous-image') {
                                                current_image--;
                                            } else {
                                                current_image++;
                                            }

                                            selector = $('[data-image-id="' + current_image + '"]');
                                            updateGallery(selector);
                                        });

                                    function updateGallery(selector) {
                                        let $sel = selector;
                                        current_image = $sel.data('image-id');
                                        $('#image-gallery-title')
                                            .text($sel.data('title'));
                                        $('#image-gallery-image')
                                            .attr('src', $sel.data('image'));
                                        disableButtons(counter, $sel.data('image-id'));
                                    }

                                    if (setIDs == true) {
                                        $('[data-image-id]')
                                            .each(function () {
                                                counter++;
                                                $(this)
                                                    .attr('data-image-id', counter);
                                            });
                                    }
                                    $(setClickAttr)
                                        .on('click', function () {
                                            updateGallery($(this));
                                        });
                                }
                            });

                        // build key actions
                        $(document)
                            .keydown(function (e) {
                                switch (e.which) {
                                    case 37: // left
                                        if ((modalId.data('bs.modal') || {})._isShown && $('#show-previous-image').is(":visible")) {
                                            $('#show-previous-image')
                                                .click();
                                        }
                                        break;

                                    case 39: // right
                                        if ((modalId.data('bs.modal') || {})._isShown && $('#show-next-image').is(":visible")) {
                                            $('#show-next-image')
                                                .click();
                                        }
                                        break;

                                    default:
                                        return; // exit this handler for other keys
                                }
                                e.preventDefault(); // prevent the default action (scroll / move caret)
                            });


                    })

                });
            </script>
            <script>
                $('#uploadForm').submit(function (evt) {
                    evt.preventDefault();
                    var fileLength = $("#files")[0].files.length;
                    console.log(fileLength);

                    // start
                    var files = $('#files')[0].files;
                    var totalSize = 0;

                    for (var i = 0; i < files.length; i++) {
                        // calculate total size of all files
                        totalSize += files[i].size;
                    }

                    var sizeInMB = (totalSize / (1024*1024)).toFixed(2);

                    if (sizeInMB > 30) {
                        alert("Files too large!")
                        return;
                    }
                    if (fileLength > 6) {
                        alert("Maximum 6 files are allowed!")
                        return;
                    }



                    var formData = new FormData(this);

                    console.log(formData);
                    $.ajax({
                        type: 'POST',
                        url: '/uploadImg',
                        data: formData,
                        cache: false,
                        dataType: 'json',
                        contentType: false,
                        processData: false,
                        success: function (data) {
                            if (data.flag) {
                                alert("Update Success");
                                location.reload();

                            } else {
                                alert(data.errorMsg);
                                location.href = "login.html";
                            }
                        },
                        error: function (data) {
                            // alert(data);
                        }
                    });
                });
            </script>
            <script>
                $('#uploadMainImageForm').submit(function (evt) {
                    evt.preventDefault();
                    var formData = new FormData(this);
                    console.log(formData);
                    $.ajax({
                        type: 'POST',
                        url: '/uploadMainImg',
                        data: formData,
                        cache: false,
                        dataType: 'json',
                        contentType: false,
                        processData: false,
                        success: function (data) {
                            if (data.flag) {
                                alert("Main Image Update Success");
                                location.reload();

                            } else {
                                alert(data.errorMsg);
                                location.href = "login.html";
                            }
                        },
                        error: function (data) {
                            alert(data);
                        }
                    });
                });
            </script>

            <!--script for form-->


        </body>
    </html>