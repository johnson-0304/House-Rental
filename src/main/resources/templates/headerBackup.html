<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous">
<link rel="stylesheet" href="css/footer.css">
<script src="js/jquery-3.6.0.js"></script>
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>-->
<!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>-->


<div>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse " id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link text-light" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-light" href="uploadHouse.html">Upload</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-light" href="#">Page 2</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-light" href="#">Page 3</a>
                </li>
            </ul>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item mr-3">
                      <span class="navbar-text" id="username_span">

                      </span>
                </li>
                <li class="nav-item hideShowBtn" id="btnLi">
<!--                    <button id="logoutBtn" class="btn btn-outline-danger my-2 my-sm-0" type="submit">Logout</button>-->
<!--                    <button id="loginBtn" class="btn btn-outline-success my-2 my-sm-0" type="submit">Login</button>-->
<!--                    <button id="registerBtn" class="btn btn-outline-primary my-2 my-sm-0" type="submit">Register</button>-->
                </li>
            </ul>

        </div>
    </nav>
</div>

<!--        script-->
<script>
    $(function () {
        $.get("findUsernameServlet", {}, function (data) {
            console.log(data);
            if(data === null){
                document.getElementsByClassName("hideShowBtn")[0].innerHTML="<button id=\"loginBtn\" class=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\">Login</button>\n" +
                    "                    <button id=\"registerBtn\" class=\"btn btn-outline-primary my-2 my-sm-0\" type=\"submit\">Register</button>";


                $("#loginBtn").click(function (){
                    location.href = "login.html";
                })

                $("#registerBtn").click(function (){
                    location.href = "register.html";
                })


            } else {
                var msg = "welcome," + data.username
                $("#username_span").html(msg);
                document.getElementsByClassName("hideShowBtn")[0].innerHTML="<button id=\"logoutBtn\" class=\"btn btn-outline-danger my-2 my-sm-0\" type=\"submit\">Logout</button>";
                $("#logoutBtn").click(function () {
                    $.get("logoutServlet", {}, function (data) {
                        if (data.flag) {
                            location.href = "login.html";
                        }
                    });
                })


            }

        })
    });

    // $(document).ready(function () {
    //     console.log("ready")
    //
    //     $("#logoutBtn").click(function () {
    //         $.get("logoutServlet", {}, function (data) {
    //             if (data.flag) {
    //                 location.href = "login.html";
    //             }
    //         });
    //     })
    //     $("#loginBtn").click(function (){
    //         location.href = "login.html";
    //     })
    //
    //     $("#registerBtn").click(function (){
    //         location.href = "register.html";
    //     })
    // })

</script>