<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Upload House</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <!--        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>-->


<!--        <style>-->
<!--            .preview-images-zone {-->
<!--                width: 100%;-->
<!--                border: 1px solid #ddd;-->
<!--                min-height: 180px;-->
<!--                /* display: flex; */-->
<!--                padding: 5px 5px 0px 5px;-->
<!--                position: relative;-->
<!--                overflow: auto;-->
<!--            }-->

<!--            .preview-images-zone > .preview-image:first-child {-->
<!--                height: 185px;-->
<!--                width: 185px;-->
<!--                position: relative;-->
<!--                margin-right: 5px;-->
<!--            }-->

<!--            .preview-images-zone > .preview-image {-->
<!--                height: 90px;-->
<!--                width: 90px;-->
<!--                position: relative;-->
<!--                margin-right: 5px;-->
<!--                float: left;-->
<!--                margin-bottom: 5px;-->
<!--            }-->

<!--            .preview-images-zone > .preview-image > .image-zone {-->
<!--                width: 100%;-->
<!--                height: 100%;-->
<!--            }-->

<!--            .preview-images-zone > .preview-image > .image-zone > img {-->
<!--                width: 100%;-->
<!--                height: 100%;-->
<!--            }-->

<!--            .preview-images-zone > .preview-image > .tools-edit-image {-->
<!--                position: absolute;-->
<!--                z-index: 100;-->
<!--                color: #fff;-->
<!--                bottom: 0;-->
<!--                width: 100%;-->
<!--                text-align: center;-->
<!--                margin-bottom: 10px;-->
<!--                display: none;-->
<!--            }-->

<!--            .preview-images-zone > .preview-image > .image-cancel {-->
<!--                font-size: 18px;-->
<!--                position: absolute;-->
<!--                top: 0;-->
<!--                right: 0;-->
<!--                font-weight: bold;-->
<!--                margin-right: 10px;-->
<!--                cursor: pointer;-->
<!--                display: none;-->
<!--                z-index: 100;-->
<!--            }-->

<!--            .preview-image:hover > .image-zone {-->
<!--                cursor: move;-->
<!--                opacity: .5;-->
<!--            }-->

<!--            .preview-image:hover > .tools-edit-image,-->
<!--            .preview-image:hover > .image-cancel {-->
<!--                display: block;-->
<!--            }-->

<!--            .ui-sortable-helper {-->
<!--                width: 90px !important;-->
<!--                height: 90px !important;-->
<!--            }-->

<!--            .container {-->
<!--                padding-top: 50px;-->
<!--            }-->
<!--        </style>-->
    </head>
    <body>
        <!--header-->
        <div class="headerpage"></div>
        <!--header over-->


        <!--body-->
        <div class="container-fluid">
            <div class="container p-1 mt-5 mb-5">
                <h3>Upload House</h3>
                <form class="mt-3" id="addHouseForm" method="post">
                    <div class="form-group">
                        <label>Building Name/Taman Name</label>
                        <input type="text" class="form-control" name="buildingName" maxlength="80" id="buildingName"
                               placeholder="Enter Building Name/Taman Name" required>
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <input type="text" class="form-control" name="address" id="address" maxlength="150" placeholder="Address" required>
                    </div>
<!--                    <div class="form-row">-->
<!--                        <div class="form-group col-md-6">-->
<!--                            <label>Area</label>-->
<!--                            <input type="text" class="form-control" id="area"-->
<!--                                   placeholder="Area eg: Bukit Jalil, Johor Bahru">-->
<!--                        </div>-->
<!--                        <div class="form-group col-md-1">-->
<!--                            <label>&nbsp;</label>-->
<!--                            <button type="submit" class="btn btn-outline-primary form-control">Add Area</button>-->
<!--                        </div>-->
<!--                    </div>-->
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label>Rental per Month (RM)</label>
                            <input type="number" min="1" max="9999999" name="rental" class="form-control" id="rental"
                                   placeholder="Rental" required>
                        </div>
                        <div class="form-group col-md-6">
                            <label>State</label>
                            <select class="custom-select mr-sm-2" name="state" id="state">
                                <option value="Johor">Johor</option>
                                <option value="Kedah">Kedah</option>
                                <option value="Kelantan">Kelantan</option>
                                <option value="Malacca">Malacca</option>
                                <option value="Negeri Sembilan">Negeri Sembilan</option>
                                <option value="Pahang">Pahang</option>
                                <option value="Penang">Penang</option>
                                <option value="Perak">Perak</option>
                                <option value="Perlis">Perlis</option>
                                <option value="Sabah">Sabah</option>
                                <option value="Sarawak">Sarawak</option>
                                <option value="Selangor">Selangor</option>
                                <option value="Terengganu">Terengganu</option>
                            </select>
                        </div>
                        <!--                        <div class="form-group col-md-4">-->
                        <!--                            <label>Area</label>-->
                        <!--                            <select class="custom-select mr-sm-2" id="area">-->
                        <!--                                <option value="1">Bukit Jalil</option>-->
                        <!--                                <option value="2">Johor Bahru</option>-->
                        <!--                                <option value="3">George Town</option>-->
                        <!--                            </select>-->
                        <!--                        </div>-->
                        <!--                        <div class="form-group col-md-2">-->
                        <!--                            <label>Add New Area</label>-->
                        <!--                            <button type="submit" class="btn btn-outline-primary form-control">Add</button>-->
                        <!--                        </div>-->
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea class="form-control" id="description" maxlength="4500" name="description" rows="3" required></textarea>
                    </div>
                    <!--facility-->
                    <div class="form-row">

                        <div class="form-group col-md-3">
                            <label>Type</label>
                            <select class="custom-select mr-sm-2" name="type" id="type">
                                <option value="High Rise">High Rise</option>
                                <option value="Landed">Landed</option>
                                <option value="Room">Room</option>
                            </select>
                        </div>
                        <div class="form-group col-md-3">
                            <label>Square ft</label>
                            <input type="number" min="1" max="999999" name="squareFt" class="form-control" id="sqft"
                                   placeholder="Square ft" required>
                        </div>
                        <div class="form-group col-md-3">
                            <label>Furnish</label>
                            <select class="custom-select mr-sm-2" name="furnish" id="furnish">
                                <option value="No Furnishing">No Furnishing</option>
                                <option value="Partial Furnishing">Partial Furnishing</option>
                                <option value="Fully Furnishing">Fully Furnishing</option>
                            </select>
                        </div>
                        <div class="form-group col-md-3">
                            <label>Car Park (Amount)</label>
                            <input type="number" min="0" max="99" name="carPark" class="form-control" id="carpark"
                                   placeholder="Car Park" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-3">
                            <label>Bedroom (Amount)</label>
                            <input type="number" min="0" max="99" name="bedroom" class="form-control" id="bedroom"
                                   placeholder="Bedroom" required>
                        </div>
                        <div class="form-group col-md-3">
                            <label>Bathroom (Amount)</label>
                            <input type="number" min="0" max="99" name="bathroom" class="form-control" id="bathroom"
                                   placeholder="Bathroom" required>
                        </div>
                    </div>

                    <!--image-->
<!--                    <div class="form-group">-->
<!--                        <div class="form-group">-->
<!--                            <a href="javascript:void(0)" onclick="$('#pro-image').click()">Upload Image</a>-->
<!--                            <input type="file" id="pro-image" name="pro-image" style="display: none;"-->
<!--                                   class="form-control" multiple>-->
<!--                        </div>-->
<!--                        <div class="preview-images-zone">-->
<!--                            <div class="preview-image preview-show-1">-->
<!--                                <div class="image-cancel" data-no="1">x</div>-->
<!--                                <div class="image-zone"><img id="pro-img-1"-->
<!--                                                             src="https://img.purch.com/w/660/aHR0cDovL3d3dy5saXZlc2NpZW5jZS5jb20vaW1hZ2VzL2kvMDAwLzA5Ny85NTkvb3JpZ2luYWwvc2h1dHRlcnN0b2NrXzYzOTcxNjY1LmpwZw==">-->
<!--                                </div>-->
<!--                                <div class="tools-edit-image"><a href="javascript:void(0)" data-no="1"-->
<!--                                                                 class="btn btn-light btn-edit-image">edit</a></div>-->
<!--                            </div>-->
<!--                            <div class="preview-image preview-show-2">-->
<!--                                <div class="image-cancel" data-no="2">x</div>-->
<!--                                <div class="image-zone"><img id="pro-img-2"-->
<!--                                                             src="https://www.codeproject.com/KB/GDI-plus/ImageProcessing2/flip.jpg">-->
<!--                                </div>-->
<!--                                <div class="tools-edit-image"><a href="javascript:void(0)" data-no="2"-->
<!--                                                                 class="btn btn-light btn-edit-image">edit</a></div>-->
<!--                            </div>-->
<!--                            <div class="preview-image preview-show-3">-->
<!--                                <div class="image-cancel" data-no="3">x</div>-->
<!--                                <div class="image-zone"><img id="pro-img-3" src="http://i.stack.imgur.com/WCveg.jpg">-->
<!--                                </div>-->
<!--                                <div class="tools-edit-image"><a href="javascript:void(0)" data-no="3"-->
<!--                                                                 class="btn btn-light btn-edit-image">edit</a></div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        &lt;!&ndash;image-end&ndash;&gt;-->

<!--                    </div>-->
<!--                    <input type="hidden" id="imageUrl" name="imageUrl" value="" />-->
<!--                    <div>-->
<!--                        <div id="demo" ></div>-->
<!--                    </div>-->
                    <button type="submit" id="submit-type" class="btn btn-primary">Submit</button>
                </form>

            </div>
        </div>

        <!--&lt;!&ndash;        test&ndash;&gt;-->
        <!--        <form action="uploadServlet" method="post" id="uploadForm">-->
        <!--            <div class="form-group">-->
        <!--                <label for="exampleInputEmail1">Email address</label>-->
        <!--                <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="email" placeholder="Enter email">-->
        <!--                <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>-->
        <!--            </div>-->
        <!--            <div class="form-group">-->
        <!--                <label for="exampleInputPassword1">Password</label>-->
        <!--                <input type="password" class="form-control" id="exampleInputPassword1" name="password" placeholder="Password">-->
        <!--            </div>-->
        <!--            <button type="submit" class="btn btn-primary">Submit</button>-->
        <!--        </form>-->
        <!--&lt;!&ndash;        test end&ndash;&gt;-->

        <!--body end-->
        <!--footer-->
        <div class="footerpage"></div>
        <!--footer over-->

        <!--script-->
        <!--        header and footer-->
        <script>
            $(function () {
                $(".headerpage").load("header.html");
                $(".footerpage").load("footer.html");
            });
        </script>
        <!--        form-->
        <script>
            $(function () {
                $("#addHouseForm").submit(function (e) {
                    e.preventDefault();
                    var obj = $(this).serialize()
                    $.post("/uploadServlet", $(this).serialize(), function (data) {
                        //data=response flag:true:register success, false: register fail
                        if (data.flag) {
                            alert("Upload Success! Please upload images and agreement.")
                            location.href = "myHouseList.html";
                        } else {
                            alert(data.errorMsg);

                        }
                    })
                })

            });

        </script>


        <!--        image selector-->
        <script>
            // $(document).ready(function () {
            //     document.getElementById('pro-image').addEventListener('change', readImage, false);
            //
            //     $(".preview-images-zone").sortable();
            //
            //     $(document).on('click', '.image-cancel', function () {
            //         let no = $(this).data('no');
            //         $(".preview-image.preview-show-" + no).remove();
            //     });
            // });


            var num = 4;

            function readImage() {
                if (window.File && window.FileList && window.FileReader) {
                    var files = event.target.files; //FileList object
                    var output = $(".preview-images-zone");

                    for (let i = 0; i < files.length; i++) {
                        var file = files[i];
                        if (!file.type.match('image')) continue;

                        var picReader = new FileReader();

                        picReader.addEventListener('load', function (event) {
                            var picFile = event.target;
                            var html = '<div class="preview-image preview-show-' + num + '">' +
                                '<div class="image-cancel" data-no="' + num + '">x</div>' +
                                '<div class="image-zone"><img id="pro-img-' + num + '" src="' + picFile.result + '"></div>' +
                                '<div class="tools-edit-image"><a href="javascript:void(0)" data-no="' + num + '" class="btn btn-light btn-edit-image">edit</a></div>' +
                                '</div>';

                            output.append(html);
                            num = num + 1;
                        });

                        picReader.readAsDataURL(file);
                    }
                    $("#pro-image").val('');
                } else {
                    console.log('Browser not support');
                }
            }


        </script>
    </body>
</html>